<!--
index: 10
title: 堆叠条形图
resource:
  jsFiles:
    - https://unpkg.alipay.com/@alipay/data-set@0.3.0/build/data-set.js
    - ${assets}/lib/jquery-3.2.1.min.js
plotDescription: 分组条形图
plotUsage: blablablalalalala
relativePlots:
  - ${plotByName.pie}
  - ${plotByName.line}
-->
<script>
    const data = [
      { 'State': 'WY', '小于5岁': 25635, '5至13岁': 1890, '14至17岁': 9314 },
      { 'State': 'DC', '小于5岁': 30352, '5至13岁': 20439, '14至17岁': 10225 },
      { 'State': 'VT', '小于5岁': 38253, '5至13岁': 42538, '14至17岁': 15757 },
      { 'State': 'ND', '小于5岁': 51896, '5至13岁': 67358, '14至17岁': 18794 },
      { 'State': 'AK', '小于5岁': 72083, '5至13岁': 85640, '14至17岁': 22153 }
    ];

    const ds = new DataSet();
    const dv = ds.createView().source(data);
    dv.transform({
      type: 'fold',
      fields: [ '小于5岁', '5至13岁', '14至17岁' ], // 展开字段集
      key: '年龄段', // key字段
      value: '人口数量', // value字段
      retains: [ 'State' ] // 保留字段集，默认为除fields以外的所有字段
    });

    const chart = new G2.Chart({
      container: 'mountNode',
      forceFit: true,
      height: window.innerHeight
    });
    chart.source(dv);
    chart.coord().transpose();
    chart.axis('State', {
      line: {
        lineWidth: 1,
        stroke: '#CCD6EC'
      },
      tickLine: {
        lineWidth: 1,
        stroke: '#CCD6EC',
        length: 4
      },
      grid: null
    });
    chart.axis('人口数量', {
      line: null,
      tickLine: null,
      grid: {
        lineStyle: {
          stroke: '#E9E9E9',
          lineWidth: 1,
          lineDash: [ 3, 3 ]
        }
      }
    });
    chart.intervalStack().position('State*人口数量').color('年龄段');
    chart.render();
</script>
