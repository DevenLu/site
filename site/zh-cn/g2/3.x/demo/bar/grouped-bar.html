<!--
index: 9
title: 分组条形图
resource:
  jsFiles:
    - https://unpkg.alipay.com/@alipay/data-set@0.3.0/build/data-set.js
plotDescription: 分组条形图
plotUsage: blablablalalalala
relativePlots:
  - ${plotByName.pie}
  - ${plotByName.line}
-->
<script>
  const data = [
    { label: 'Monday', series1: 2800, series2: 2260 },
    { label: 'Tuesday', series1: 1800, series2: 1300 },
    { label: 'Wednesday', series1: 950, series2: 900 },
    { label: 'Thursday', series1: 500, series2: 390 },
    { label: 'Friday', series1: 170, series2: 100 },
  ];
  const ds = new DataSet();
  const dv = ds.createView().source(data);
  dv.transform({
    type: 'sort',
    callback(a, b) { // 排序依据，和原生js的排序callback一致
      return a.series1 - b.series1 > 0;
    }
  }).transform({
    type: 'fold',
    fields: [ 'series2', 'series1' ], // 展开字段集
    key: 'type', // key字段
    value: 'value', // value字段
  });

  const chart = new G2.Chart({
    container: 'mountNode',
    forceFit: true,
    height: window.innerHeight
  });
  chart.source(dv);
  chart.coord().transpose();
  chart.interval().position('label*value').color('type').adjust([{
    type: 'dodge',
    marginRatio: 1 / 32
  }]);
  chart.render();
</script>
