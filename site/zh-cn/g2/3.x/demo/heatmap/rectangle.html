<!--
index: 0
title: 矩形分箱图
resource:
  jsFiles:
    - ${url.dataSet}
    - ${url.jquery}
plotDescription: 矩形分箱图
plotUsage: blablablalalalala
relativePlots:
  - ${plotByName.pie}
  - ${plotByName.line}
-->
<script>
    $.getJSON('/assets/data/gaussion-distribution.json', data => {
        const ds = new DataSet({
            state: {
                sizeEncoding: false
            }
        });
        const dv = ds.createView('diamond').source(data);
        dv.transform({
            sizeByCount: '$state.sizeEncoding', // calculate bin size by binning count
            type: 'bin.rectangle',
            fields: [ 'x', 'y' ], // 对应坐标轴上的一个点
            bins: [ 20, 10 ]
        });

        const chart = new G2.Chart({
            container: 'mountNode',
            forceFit: true,
            height: window.innerHeight
        });
        chart.source(dv);
        chart.tooltip(false);
        chart.axis('x', {
            grid: {
                lineStyle: {
                    stroke: '#d9d9d9',
                    lineWidth: 1,
                    lineDash: [ 2, 2 ]
                }
            }
        });
        chart.polygon()
            .position('x*y')
            .color('count', [ 'rgb(200, 200, 255)', 'rgb(0, 0, 255)' ]);
        chart.render();

        const $sizeEncoding = $('#size-encoding');
        $sizeEncoding.on('change', () => {
            if ($sizeEncoding.val() === 'on') {
                ds.setState('sizeEncoding', true);
            } else {
                ds.setState('sizeEncoding', false);
            }
        });
    });
</script>
