<!--
index: 3
title: 旭日图
resource:
  jsFiles:
    - ${url.dataSet}
plotDescription: Sunburst Chart，旭日图。
plotUsage: 旭日图用于可视化同心圆描绘的分层数据。中心的圆圈表示根节点，层次结构从中心向外移动。内圈的一段与位于母段的角扫描内的外圆的那些段相分离。没有任何分级数据（一级别）的旭日图，看起来类似于甜甜圈图。然而，具有多个等级类别的旭日图显示了内外环的关联关系。
relativePlots:
  - ${plotByName.pie}
  - ${plotByName.bar}
-->
<script>
  const { DataView } = DataSet;
  const data = [
    { value: 251, type: '大事例一', name: '子事例一' },
    { value: 1048, type: '大事例一', name: '子事例二' },
    { value: 610, type: '大事例二', name: '子事例三' },
    { value: 434, type: '大事例二', name: '子事例四' },
    { value: 335, type: '大事例三', name: '子事例五' },
    { value: 250, type: '大事例三', name: '子事例六' }
  ];
  const dv = new DataView();
  dv.source(data).transform({
    type: 'percent',
    field: 'value',
    dimension: 'type',
    as: 'percent'
  });
  const chart = new G2.Chart({
    container: 'mountNode',
    width: 700,
    height: 400,
    padding: 10
  });
  chart.source(dv, {
    percent: {
      formatter: val => {
        val = (val * 100).toFixed(2) + '%';
        return val;
      }
    }
  });
  chart.coord('theta', {
    radius: 0.5
  });
  chart.tooltip({
    showTitle: false,
    itemTpl: '<li><span style="background-color:{color};" class="g2-tooltip-marker"></span>{name}: {value}</li>'
  });
  chart.legend(false);
  chart.intervalStack()
    .position('percent')
    .color('type')
    .label('type', {
      offset: -10
    })
    .tooltip('name*percent', (item, percent) => {
      percent = (percent * 100).toFixed(2) + '%';
      return {
        name: item,
        value: percent
      };
    })
    .select(false)
    .style({
      lineWidth: 1,
      stroke: '#fff'
    });

  const outterView = chart.view();
  const dv1 = new DataView();
  dv1.source(data).transform({
    type: 'percent',
    field: 'value',
    dimension: 'name',
    as: 'percent'
  });
  outterView.source(dv1, {
    percent: {
      formatter: val => {
        val = (val * 100).toFixed(2) + '%';
        return val;
      }
    }
  });
  outterView.coord('theta', {
    innerRadius: 0.5 / 0.75,
    radius: 0.75
  });
  outterView.intervalStack()
    .position('percent')
    .color('name', [ '#BAE7FF', '#7FC9FE', '#71E3E3', '#ABF5F5', '#8EE0A1', '#BAF5C4' ])
    .label('name')
    .tooltip('name*percent', (item, percent) => {
      percent = (percent * 100).toFixed(2) + '%';
      return {
        name: item,
        value: percent
      };
    })
    .select(false)
    .style({
      lineWidth: 1,
      stroke: '#fff'
    });

  chart.render();
</script>
